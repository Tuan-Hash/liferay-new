export const metadata = "pack: default\r\nenabled: true\r\nrunner_type: orquesta\r\nname: Case3-HA\r\nentry_point: workflows\/Case3-HA.yaml\r\ndescription: Create new host and new volume\r\nparameters:\r\n  HostGroupName:\r\n    type: string\r\n    required: true\r\n  PortGroup:\r\n    type: integer\r\n    required: true\r\n  Volume_Capacity:\r\n    type: integer\r\n    required: true\r\n  Volume_Label:\r\n    type: string\r\n    required: true\r\n  Host_Nickname:\r\n    required: true\r\n    type: string\r\n";
export const workflow = "version: 1.0\r\ntasks:\r\n  # [483, 104]\r\n  task1:\r\n    action: vault.read\r\n    input:\r\n      log_level: DEBUG\r\n      path: secret\/data\/HA\r\n    next:\r\n      - do:\r\n          - task2\r\n        publish:\r\n          - key: <% result().result.data %>\r\n  # [484, 271]\r\n  task2:\r\n    action: core.http\r\n    input:\r\n      url: \"http:\/\/172.18.25.7:22015\/Automation\/v1\/objects\/Services?HQL::filter=name='Allocate Volumes with Configuration Manager Demo'\"\r\n      verify_ssl_cert: false\r\n      username: <%ctx('key').username%>\r\n      password: <%ctx('key').password%>\r\n      method: GET\r\n    next:\r\n      - do:\r\n          - task3\r\n  # [470, 436]\r\n  task3:\r\n    action: core.http\r\n    input:\r\n      url: \"http:\/\/172.18.25.7:22015\/Automation\/v1\/objects\/Services\/371781\/actions\/submit\/invoke\"\r\n      method: POST\r\n      verify_ssl_cert: false\r\n      username: <%ctx('key').username%>\r\n      password: <%ctx('key').password%>\r\n      body: <%str(ctx().key2) %>\r\n      headers:\r\n        content-type: application\/json\r\n    next:\r\n      - do:\r\n          - task4\r\n        publish:\r\n          - key3: <% result().body %>\r\n  # [314, 599]\r\n  task4:\r\n    action: core.http\r\n    input:\r\n      url: <% str(ctx().key3.affectedResource[1]) %>\r\n      username: <%ctx('key').username %>\r\n      password: <%ctx('key').password %>\r\n      verify_ssl_cert: false\r\n    next:\r\n      - when: <% task().result.body.status = \"completed\" %>\r\n        publish: final=<% result() %>\r\n        do:\r\n          - task5\r\n    retry:\r\n      when: <% task().result.body.status != \"completed\" %>\r\n      count: 100\r\n      delay: 5\r\n  # [739, 624]\r\n  task5:\r\n    action: default.Refresh_Storage\r\ninput:\r\n  - HostGroupName\r\n  - PortGroup\r\n  - Volume_Capacity\r\n  - Volume_Label\r\n  - Host_Nickname\r\noutput:\r\n  - final: <%ctx().final%>\r\nvars:\r\n  - key2:\r\n      name: submit\r\n      href: \"http:\/\/172.18.25.7:22015\/Automation\/v1\/objects\/Services\/371781\/actions\/submit\/invoke\"\r\n      method: POST\r\n      parameters:\r\n        - name: Allocate Volumes with Configuration Manager Demo_20220814232625\r\n          submitter: null\r\n          scheduleType: immediate\r\n          description: null\r\n          scheduledStartTime: \"2022-08-14T23:26:25.077-04:00\"\r\n          recurrenceInterval: daily\r\n          recurrenceDayOfWeek: null\r\n          recurrenceDayOfMonth: null\r\n          recurrenceLastDayOfMonth: false\r\n          recurrenceStartDate: \"2022-08-14T00:00:00.000Z\"\r\n          recurrenceTime: \"00:00:00\"\r\n          recurrenceMinutes: 1440\r\n          serviceID: 371781\r\n        - instanceID: 371613\r\n          type: file\r\n          keyName: ConfigurationManagerConnection\r\n          value: \"{\\\"productName\\\":\\\"ConfigurationManager\\\",\\\"name\\\":\\\"Config2\\\",\\\"ipAddress\\\":\\\"172.18.14.2\\\",\\\"port\\\":\\\"23450\\\",\\\"protocol\\\":\\\"http\\\",\\\"userID\\\":\\\"system\\\",\\\"status\\\":\\\"success\\\",\\\"connectedTime\\\":\\\"2022-08-14T23:09:15.000-04:00\\\"}\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\"}\"\r\n          serviceID: 371781\r\n        - instanceID: 372082\r\n          type: file\r\n          keyName: StorageSystem\r\n          value: \"{\\\"storageDeviceId\\\":\\\"886000495101\\\",\\\"model\\\":\\\"VSP G900\\\",\\\"serialNumber\\\":\\\"495101\\\",\\\"svpIp\\\":\\\"\\\"}\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\"}\"\r\n          serviceID: 371781\r\n        - instanceID: 371785\r\n          type: string\r\n          keyName: PortType\r\n          value: Fibre\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\"}\"\r\n          serviceID: 371781\r\n        - instanceID: 370548\r\n          type: file\r\n          keyName: HostGroupSettings\r\n          value: \"[{\\\"hostGroupName\\\":\\\"<%ctx().HostGroupName%>\\\",\\\"iScsiTargetName\\\":\\\"\\\",\\\"wwnSettings\\\":[{\\\"wwn\\\":\\\"<%ctx().PortGroup%>\\\",\\\"wwnNickname\\\":\\\"<%ctx().Host_Nickname%>\\\"}],\\\"iScsiSettings\\\":[],\\\"hostMode\\\":\\\"WIN_EX\\\",\\\"hostModeOptions\\\":[40]}]\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\",\\\"itemsArray\\\":[{\\\"permission\\\":\\\"unlocked\\\",\\\"properties\\\":{\\\"hostGroupName\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"iScsiTargetName\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"wwnSettings\\\":{\\\"permission\\\":\\\"unlocked\\\",\\\"itemsArray\\\":[{\\\"permission\\\":\\\"unlocked\\\",\\\"properties\\\":{\\\"wwn\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"wwnNickname\\\":{\\\"permission\\\":\\\"unlocked\\\"}}}]},\\\"iScsiSettings\\\":{\\\"permission\\\":\\\"unlocked\\\",\\\"itemsArray\\\":[]},\\\"hostMode\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"hostModeOptions\\\":{\\\"permission\\\":\\\"unlocked\\\",\\\"formattedValue\\\":[\\\"40. V-Vol expansion (40)\\\"]}}}]}\"\r\n          serviceID: 371781\r\n        - instanceID: 372331\r\n          type: file\r\n          keyName: ResourceCriteria\r\n          value: \"[]\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\",\\\"itemsArray\\\":[]}\"\r\n          serviceID: 371781\r\n        - instanceID: 371402\r\n          type: file\r\n          keyName: provisioning.fabricSetting.fabric.info\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371156\r\n          type: file\r\n          keyName: ResourceGroup\r\n          value: \"{\\\"resourceGroupId\\\":0,\\\"resourceGroupName\\\":\\\"meta_resource\\\",\\\"virtualStorageId\\\":0}\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\"}\"\r\n          serviceID: 371781\r\n        - instanceID: 371857\r\n          type: file\r\n          keyName: Pool\r\n          value: \"{\\\"poolId\\\":0,\\\"poolName\\\":\\\"DpPool_000\\\",\\\"poolType\\\":\\\"HDP\\\",\\\"usedCapacityRate\\\":0,\\\"availableVolumeCapacity\\\":204800,\\\"totalPoolCapacity\\\":204800,\\\"numOfLdevs\\\":2}\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\"}\"\r\n          serviceID: 371781\r\n        - instanceID: 371980\r\n          type: string\r\n          keyName: CapacityFormat\r\n          value: Byte\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\"}\"\r\n          serviceID: 371781\r\n        - instanceID: 372420\r\n          type: file\r\n          keyName: VolumeSettings\r\n          value: \"[{\\\"volumeUsage\\\":\\\"Data\\\",\\\"numberOfVolumes\\\":1,\\\"ldevIdStartsFrom\\\":0,\\\"volumeCapacityInMiB\\\":<%ctx().Volume_Capacity%>,\\\"blockCapacity\\\":\\\"943718400\\\",\\\"volumeLabel\\\":\\\"<%ctx().Volume_Label%>\\\",\\\"lunStartsFrom\\\":0,\\\"virtualLdevIdStartsFrom\\\":0}]\"\r\n          readOnly: false\r\n          hidden: false\r\n          restriction: \"{\\\"permission\\\":\\\"unlocked\\\",\\\"itemsArray\\\":[{\\\"permission\\\":\\\"unlocked\\\",\\\"properties\\\":{\\\"volumeUsage\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"numberOfVolumes\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"ldevIdStartsFrom\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"volumeCapacityInMiB\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"blockCapacity\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"volumeLabel\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"lunStartsFrom\\\":{\\\"permission\\\":\\\"unlocked\\\"},\\\"virtualLdevIdStartsFrom\\\":{\\\"permission\\\":\\\"unlocked\\\"}}}]}\"\r\n          serviceID: 371781\r\n        - instanceID: 372383\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/infrastructure_group\r\n          value: IG_Default Service Group\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 370773\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/web_service_connection\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371730\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/storage_system\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 370845\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/resource_group\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 372269\r\n          type: string\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/__javascript_debugger_enabled__\r\n          value: false\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371399\r\n          type: string\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/__javascript_debugger_class_name__\r\n          value: com.hitachi.software.dna.tool.plugin.js.debug.JavaScriptPluginRhinoDebugger\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 372376\r\n          type: string\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/__javascript_debugger_work_dir__\r\n          value: \"D:\\\\s\\\\tmp\\\\jsdebug2\"\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 370457\r\n          type: string\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/__javascript_debugger_args__\r\n          value: transport=socket,trace=false,suspend=true,address=59001\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371610\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/carried_storage_session\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 372255\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/volume_parameters\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371331\r\n          type: boolean\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/enable_lock\r\n          value: false\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371849\r\n          type: integer\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/max_wait_time\r\n          value: 270\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371344\r\n          type: integer\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/max_session_creation_retry_count\r\n          value: 60\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371718\r\n          type: integer\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/session_creation_retry_interval\r\n          value: 1\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 372783\r\n          type: integer\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/max_lock_retry_count\r\n          value: 60\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 372324\r\n          type: integer\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/lock_retry_interval\r\n          value: 1\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 370772\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/volume_option\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371629\r\n          type: string\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/virtual_serial_number\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 370581\r\n          type: integer\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/ldev_start_from\r\n          value: 0\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 372669\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/hostgroup_parameters\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n        - instanceID: 371508\r\n          type: file\r\n          keyName: \/RepeatedProvisioning\/main\/AllocateVolumes\/allocate_lun_parameters\r\n          value: null\r\n          readOnly: false\r\n          hidden: false\r\n          serviceID: 371781\r\n  - final: null\r\n";
